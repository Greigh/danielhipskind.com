<!doctype html>
<html lang="en" data-theme="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Privacy Policy - Daniel Hipskind</title>

    <!-- Meta tags -->
    <meta
      name="description"
      content="Privacy Policy for Daniel Hipskind's Portfolio"
    />
    <meta
      name="keywords"
      content="privacy policy, data protection, analytics"
    />

    <!-- Styles -->
    <link rel="stylesheet" href="/assets/css/style.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap"
    />

    <!-- Icons -->
    <link rel="icon" type="image/x-icon" href="/assets/images/favicon.ico" />

    <!-- Add Analytics Import Map -->
    <script type="importmap">
      {
        "imports": {
          "/assets/js/theme.js": "/assets/js/theme.js",
          "/assets/js/privacy.js": "/assets/js/privacy.js",
          "/assets/js/analytics/index.js": "/assets/js/analytics/index.js",
          "/assets/js/analytics/utils/visitor.js": "/assets/js/analytics/utils/visitor.js",
          "/assets/js/analytics/utils/preferences.js": "/assets/js/analytics/utils/preferences.js"
        }
      }
    </script>

    <!-- Add Analytics Status Check -->
    <script type="module">
      import { getAnalyticsPreferences } from '/assets/js/analytics/utils/preferences.js';
      document.documentElement.setAttribute(
        'data-analytics',
        getAnalyticsPreferences().enabled ? 'enabled' : 'disabled'
      );
    </script>
  </head>
  <body>
    <div class="wrapper">
      <header class="header">
        <nav class="container">
          <a href="/" class="nav-logo">Daniel Hipskind</a>
          <button
            id="theme-toggle"
            class="theme-toggle"
            aria-label="Toggle theme"
          ></button>
        </nav>
      </header>

      <main class="container">
        <section class="privacy-section">
          <h1>Privacy Policy</h1>

          <div class="card">
            <h2>Analytics & Data Collection</h2>
            <p>
              This website uses minimal, privacy-focused analytics to understand
              visitor interactions. No personal data is collected or shared with
              third parties.
            </p>

            <div class="analytics-status-card">
              <h3>Your Current Settings</h3>
              <div id="analytics-status" class="status-display">
                <span class="status-indicator"></span>
                <span class="status-text">Checking status...</span>
              </div>
            </div>

            <div class="grid privacy-grid">
              <div class="card">
                <h3>Data Collected</h3>
                <ul>
                  <li>Anonymous page views</li>
                  <li>Session duration</li>
                  <li>Browser type</li>
                  <li>Screen size</li>
                  <li>Theme preference</li>
                  <li>Country (not specific location)</li>
                </ul>
              </div>

              <div class="card">
                <h3>Never Collected</h3>
                <ul>
                  <li>Personal information</li>
                  <li>Email addresses</li>
                  <li>IP addresses</li>
                  <li>Exact location</li>
                  <li>Device IDs</li>
                  <li>Cookies</li>
                </ul>
              </div>
            </div>
          </div>

          <div class="card">
            <h2>Privacy Controls</h2>
            <div class="privacy-controls">
              <div class="control-group">
                <button id="opt-out-btn" class="button primary">
                  <span class="button-text">Opt Out of Analytics</span>
                  <span class="button-icon"></span>
                </button>
                <p class="control-description">
                  Choose whether to allow anonymous analytics collection
                </p>
              </div>

              <div class="control-group">
                <button id="export-data" class="button secondary">
                  <span class="button-text">Export My Data</span>
                  <span class="button-icon"></span>
                </button>
                <p class="control-description">
                  Download all data associated with your current session
                </p>
              </div>

              <div class="control-group">
                <button id="delete-data" class="button warning">
                  <span class="button-text">Delete My Data</span>
                  <span class="button-icon"></span>
                </button>
                <p class="control-description">
                  Permanently remove all data from your current session
                </p>
              </div>
            </div>
          </div>

          <div class="card">
            <h3>Questions?</h3>
            <p>
              Feel free to
              <a href="mailto:me@danielhipskind.com">contact me</a> with any
              privacy-related questions.
            </p>
            <p>
              <a href="/" class="button button-outline">Return to Homepage</a>
            </p>
          </div>
        </section>
      </main>

      <footer class="footer">
        <div class="container">
          <p>Built with ❤️ using modern web technologies</p>
        </div>
      </footer>
    </div>

    <script>
      // Check for required elements
      function checkRequiredElements() {
        const required = {
          'theme-toggle': 'Theme toggle button',
          'opt-out-btn': 'Opt-out button',
          'export-data': 'Export data button',
          'delete-data': 'Delete data button',
        };

        let missingElements = [];

        for (const [id, name] of Object.entries(required)) {
          if (!document.getElementById(id)) {
            missingElements.push(name);
            console.error(`Required element missing: ${name} (id: ${id})`);
          }
        }

        if (missingElements.length > 0) {
          console.warn(
            'Missing required elements:',
            missingElements.join(', ')
          );
        }

        return missingElements.length === 0;
      }

      // Run check when DOM is loaded
      document.addEventListener('DOMContentLoaded', checkRequiredElements);
    </script>

    <!-- Import Map -->
    <script type="importmap">
      {
        "imports": {
          "/assets/js/theme.js": "/assets/js/theme.js",
          "/assets/js/privacy.js": "/assets/js/privacy.js",
          "/assets/js/analytics/index.js": "/assets/js/analytics/index.js",
          "/assets/js/analytics/utils/visitor.js": "/assets/js/analytics/utils/visitor.js",
          "/assets/js/analytics/utils/preferences.js": "/assets/js/analytics/utils/preferences.js"
        }
      }
    </script>

    <!-- Scripts -->
    <script type="module">
      import ThemeManager from '/assets/js/theme.js';
      import { initPrivacyControls } from '/assets/js/privacy.js';
      import { checkAnalyticsStatus } from '/assets/js/analytics/utils/preferences.js';

      // Initialize components when DOM is loaded
      document.addEventListener('DOMContentLoaded', async () => {
        if (checkRequiredElements()) {
          ThemeManager.initialize();
          await initPrivacyControls();
          await checkAnalyticsStatus();
        }
      });
    </script>
  </body>
</html>
